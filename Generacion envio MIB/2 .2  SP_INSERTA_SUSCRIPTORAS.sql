CREATE OR REPLACE PROCEDURE SP_INS_SUSCRIPTORAS
AS
CURSOR CTO_CUR IS
SELECT CONCALT,CONNOM,CONAP1,CONAP2,CONVIA,CONNVIA,CONNUEX,CONNUIN,CONEDIF,
       CONMANZ,CONLOTE,CONCOLO,CONCPO,CONPOB,CONUHA,CONENTR,DUP,CONENVIO,
       CONSUSCRIP,CONOFCR,CONEDO
FROM MP_PRMALTASM, CONTROL_SUSCRIPTORAS
WHERE CONCALT=ID
AND   REVISTA_ID=1
AND   COMPLETADO<>'T';

 CTO_REC CTO_CUR%ROWTYPE;
CANT NUMBER;

BEGIN
OPEN CTO_CUR;
  LOOP
   FETCH CTO_CUR INTO CTO_REC;
    EXIT WHEN CTO_CUR%NOTFOUND;

 BEGIN

     INSERT INTO ALTAS(CON_ID,CONNOM,CONAP1,CONAP2,CONTIPO,CONNVIA,CONNUEX,CONNUIN,
                  CONEDIF,CONMANZ,CONLOTE,CONPOBA,CONCPO,CONMUNI,CONUHA,CONENTR,DUP,
                  NUM_COD,CONSUS,CONADM,CONEDO,CONTPER)
     VALUES (CTO_REC.CONCALT,CTO_REC.CONNOM,CTO_REC.CONAP1,CTO_REC.CONAP2,CTO_REC.CONVIA,
            CTO_REC.CONNVIA,CTO_REC.CONNUEX,CTO_REC.CONNUIN,CTO_REC.CONEDIF,
            CTO_REC.CONMANZ,CTO_REC.CONLOTE,CTO_REC.CONCOLO,CTO_REC.CONCPO,CTO_REC.CONPOB,CTO_REC.CONUHA,
            CTO_REC.CONENTR,CTO_REC.DUP,CTO_REC.CONENVIO,CTO_REC.CONSUSCRIP,CTO_REC.CONOFCR,CTO_REC.CONEDO,'SUS');

     EXCEPTION WHEN OTHERS THEN

           NULL;
  END;

END LOOP;

  CLOSE CTO_CUR;

      COMMIT;

END;

----
